{% extends 'base.html' %}

{% block title %}{{ book.title }} - BookStore{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/" class="text-decoration-none">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'products:product_list' %}" class="text-decoration-none">Books</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ book.title }}</li>
        </ol>
    </nav>

    <!-- Main Product Detail Section -->
    <div class="row g-4 mb-5">
        <!-- Left Column - Book Image -->
        <div class="col-md-6">
            <div class="position-sticky" style="top: 20px;">
                <div class="card border-0 shadow-sm">
                    <img src="https://picsum.photos/500/600?random={{ book.id|default:1 }}" 
                         class="card-img-top rounded" 
                         alt="{{ book.title }}"
                         style="height: 600px; object-fit: cover;">
                </div>
                
                <!-- Thumbnail Gallery -->
                <div class="row mt-3 g-2">
                    {% for i in "1234" %}
                    <div class="col-3">
                        <img src="https://picsum.photos/100/120?random={{ book.id|default:forloop.counter }}" 
                             class="img-thumbnail" 
                             alt="Book preview"
                             style="height: 80px; object-fit: cover; cursor: pointer;">
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Right Column - Book Details -->
        <div class="col-md-6">
            <div class="h-100">
                <!-- Book Title -->
                <h1 class="display-5 fw-bold text-dark mb-3">{{ book.title }}</h1>
                
                <!-- Author -->
                <p class="text-muted fs-5 mb-3">
                    <i class="fas fa-user-edit me-2"></i>
                    By {{ book.author|default:"Unknown Author" }}
                </p>
                
                <!-- Rating -->
                <div class="mb-3">
                    <span class="text-warning">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </span>
                    <span class="text-muted ms-2">(4.5/5) â€¢ 127 reviews</span>
                </div>

                <!-- Price -->
                <div class="mb-4">
                    <span class="display-6 fw-bold text-success">${{ book.price }}</span>
                    {% if book.original_price %}
                        <span class="fs-4 text-muted text-decoration-line-through ms-2">${{ book.original_price }}</span>
                        <span class="badge bg-danger ms-2">Sale</span>
                    {% endif %}
                </div>

                <!-- Book Description -->
                <div class="mb-4">
                    <h3 class="h5 fw-semibold mb-3">Description</h3>
                    <p class="text-muted lh-lg">
                        {{ book.description|default:"No description available." }}
                    </p>
                </div>

                <!-- Book Details -->
                <div class="mb-4">
                    <h3 class="h5 fw-semibold mb-3">Details</h3>
                    <div class="row text-sm">
                        <div class="col-6">
                            <strong>ISBN:</strong> {{ book.isbn|default:"978-0-123456-78-9" }}<br>
                            <strong>Pages:</strong> {{ book.pages|default:"324" }}<br>
                            <strong>Language:</strong> {{ book.language|default:"English" }}
                        </div>
                        <div class="col-6">
                            <strong>Publisher:</strong> {{ book.publisher|default:"BookStore Publishing" }}<br>
                            <strong>Publication Date:</strong> {{ book.publication_date|default:"2024" }}<br>
                            <strong>Format:</strong> {{ book.format|default:"Paperback" }}
                        </div>
                    </div>
                </div>

                <!-- Quantity Selector + Add to Cart -->
                <form method="post" action="{% url 'orders:add_to_cart' book.id %}">
                    {% csrf_token %}
                    <div class="mb-4">
                        <div class="row g-3 align-items-center">
                            <div class="col-auto">
                                <label for="quantity" class="form-label fw-semibold">Quantity:</label>
                            </div>
                            <div class="col-auto">
                                <input type="number" class="form-control text-center" 
                                       id="quantity" name="quantity" value="1" min="1" max="10"
                                       style="width: 120px;">
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-grid gap-2 d-md-flex">
                        <button type="submit" class="btn btn-primary btn-lg flex-fill">
                            <i class="fas fa-cart-plus me-2"></i>Add to Cart
                        </button>
                        <button type="button" class="btn btn-outline-danger btn-lg">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                </form>

                <!-- Extra Info -->
                <div class="mt-4 p-3 bg-light rounded">
                    <div class="row text-center">
                        <div class="col-4">
                            <i class="fas fa-shipping-fast text-primary fs-4 mb-2"></i>
                            <p class="mb-0 small"><strong>Free Shipping</strong><br>Orders over $25</p>
                        </div>
                        <div class="col-4">
                            <i class="fas fa-undo text-primary fs-4 mb-2"></i>
                            <p class="mb-0 small"><strong>Easy Returns</strong><br>30 day guarantee</p>
                        </div>
                        <div class="col-4">
                            <i class="fas fa-lock text-primary fs-4 mb-2"></i>
                            <p class="mb-0 small"><strong>Secure Payment</strong><br>100% protected</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Related Books -->
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="mb-4">You might also like</h3>
            <div class="row">
                {% for i in "1234" %}
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        <img src="https://picsum.photos/300/200?random={{ forloop.counter|add:10 }}" 
                            class="card-img-top" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h6 class="card-title">Related Book {{ forloop.counter }}</h6>
                            <p class="text-success fw-bold">$15.99</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
